<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE exportmultiplex SYSTEM "jar:/mz/dtd/export_multiplex.dtd">
<exportmultiplex category="Template" ref_path="workflow_data[Internal]/storable[workflow_data]/storable[Data]">
   <Multiplex_Ref ref_path="exportmultiplex[Workflow_Table]/storable[InstanceTable]">
      <int name="Field Count" value="3"/>
      <int name="Node ID 0" value="2147483647"/>
      <int name="Node ID 1" value="1569246499"/>
      <int name="Node ID 2" value="1811779486"/>
      <string name="Node Name 0" value="Workflow"/>
      <string name="Node Name 1" value="IMBLoanService_WSDL"/>
      <string name="Node Name 2" value="matchRESTReqtoRES"/>
   </Multiplex_Ref>
   <storable name="Execution Config" storable-id="dr.WorkflowExecutionConfig" ver="8.0">
      <object name="Debug Type">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <enum name="Object Internal" storable-id="dr.DebugType" value="EVENT"/>
            </object>
         </storable>
      </object>
      <boolean name="Debug Type active" value="true"/>
      <string name="Debug Type extref key" null="true"/>
      <enum name="Debug Type fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Debug Type mod" value="false"/>
      <boolean name="Debug Type pres" value="true"/>
      <object name="Execution Settings">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <storable name="Object Internal" storable-id="dr.ExecutionSettings" ver="2.0">
                  <enum name="dist" storable-id="dr.WorkflowDistType" value="ROUND_ROBIN"/>
                  <list classname="java.util.LinkedList" name="ecList">
                     <storable name="0" storable-id="dr.PicoInstanceEntity" ver="1.0">
                        <string name="Name" value="ecsa1"/>
                        <int name="Type" value="3"/>
                     </storable>
                     <storable name="1" storable-id="dr.PicoInstanceEntity" ver="1.0">
                        <string name="Name" value="ecsa2"/>
                        <int name="Type" value="3"/>
                     </storable>
                  </list>
                  <boolean name="enabled" value="true"/>
                  <list classname="java.util.LinkedList" name="groupList"/>
               </storable>
            </object>
         </storable>
      </object>
      <boolean name="Execution Settings active" value="true"/>
      <string name="Execution Settings extref key" null="true"/>
      <enum name="Execution Settings fit" storable-id="dr.DRFieldInstanceType" value="INSTANCE"/>
      <boolean name="Execution Settings mod" value="false"/>
      <boolean name="Execution Settings pres" value="true"/>
      <object name="Number of Files to Keep">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <int name="Object Internal" value="0"/>
            </object>
         </storable>
      </object>
      <boolean name="Number of Files to Keep active" value="true"/>
      <string name="Number of Files to Keep extref key" null="true"/>
      <enum name="Number of Files to Keep fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Number of Files to Keep mod" value="false"/>
      <boolean name="Number of Files to Keep pres" value="true"/>
      <object name="Throughput MIM">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <null name="Object Internal"/>
            </object>
         </storable>
      </object>
      <boolean name="Throughput MIM active" value="true"/>
      <string name="Throughput MIM extref key" null="true"/>
      <enum name="Throughput MIM fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Throughput MIM mod" value="false"/>
      <boolean name="Throughput MIM pres" value="true"/>
      <object name="Transaction Handler">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <null name="Object Internal"/>
            </object>
         </storable>
      </object>
      <boolean name="Transaction Handler active" value="true"/>
      <string name="Transaction Handler extref key" null="true"/>
      <enum name="Transaction Handler fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Transaction Handler mod" value="false"/>
      <boolean name="Transaction Handler pres" value="true"/>
   </storable>
   <list classname="java.util.ArrayList" name="Field Types">
      <storable name="0" storable-id="dr.WorkflowData$FieldAndType" ver="1.0">
         <string name="Field Name" value="Execution - Execution Settings"/>
         <enum name="Field Type" storable-id="dr.DRFieldInstanceType" value="INSTANCE"/>
         <int name="Node Id" value="2147483647"/>
         <string name="Node Name" value="Workflow"/>
      </storable>
      <storable name="1" storable-id="dr.WorkflowData$FieldAndType" ver="1.0">
         <string name="Field Name" value="Webservices - HTTP Address"/>
         <enum name="Field Type" storable-id="dr.DRFieldInstanceType" value="DEFAULT"/>
         <int name="Node Id" value="1569246499"/>
         <string name="Node Name" value="IMBLoanService_WSDL"/>
      </storable>
      <storable name="2" storable-id="dr.WorkflowData$FieldAndType" ver="1.0">
         <string name="Field Name" value="Configuration - Profile"/>
         <enum name="Field Type" storable-id="dr.DRFieldInstanceType" value="DEFAULT"/>
         <int name="Node Id" value="1811779486"/>
         <string name="Node Name" value="matchRESTReqtoRES"/>
      </storable>
   </list>
   <int name="Flow Counters Interval" value="0"/>
   <list classname="java.util.ArrayList" name="Logged error MIM"/>
   <list classname="java.util.ArrayList" name="Nodes">
      <storable name="0" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
               <storable name="Data" storable-id="dr.StuffyMapperData" ver="1.0">
                  <object name="Source code">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal"><![CDATA[//ultra
import ultra.CBS.UFL_Aggregation;
import ultra.TCPIP;
import ultra.Ultra.UFL_MBASE_CFC152020;
import ultra.RESTClient;
import ultra.Ultra.UFL_SYSLOG;
//apl
import apl.Common.APL_Common_Utilities;
import apl.IMB.APL_IMBLoanService;

consume {
    try{
        debug("FROM WS");
        debug(input);
        debug("END WS");
        
        //declare save log
        string channelName = "";
        string serviceName = "";
        string xmlString = "";
            
        //debug(input);
        string acqRefNo = generateAcquireReferenceNumber();
        bytearray socketRequest = null;
        string restRequest = "";
        boolean flagSave = true; //use normal request except REST
        
        if(instanceOf(input, WSCycle_getLoanApplicationStatus)){
            flagSave = false;
            WSCycle_getLoanApplicationStatus req = (WSCycle_getLoanApplicationStatus) input;
            restRequest = createContentMessageApplication_GetLoanApplicationStatus(req);
            
            RESTCycleUDR restUDR = udrCreate(RESTCycleUDR);
            RESTRequest restReq = udrCreate(RESTRequest);
            
            map<string,string> header = mapCreate(string,string);
            mapSet(header,"Accept","*/*" );
            
            restReq.Header = header;
            //Set HTTP method
            restReq.Method = "GET";
            //Set resource URI
            debug(restRequest);
            restReq.ResourceURI = restRequest;        

            restUDR.Request = restReq;
            restUDR.Context = acqRefNo;
            udrRoute(restUDR,"RESTRequest"); 

            debug("===rest===");
            debug(restUDR);
            debug("===end rest===");
            
            Matcher match = udrCreate(Matcher);
            match.uuid = acqRefNo;
            match.requestMillisec = dateCreateNowMilliseconds();
            match.soapRequest = req;
            udrRoute(match, "toRESTAggregation");
            
            //save log
            Logger log = udrCreate(Logger);
            log.uuid = acqRefNo;
            log.channelName = req.param_Header.ChannelID;
            log.serviceName = req.operation;
            log.xmlString = (string) req;
            log.restString = restRequest;
            log.logType = "request";
            //get execution context
            log.exContext = (string) mimGet("Workflow", "Execution Context");
            udrRoute(log,"saveReqLogREST");
        } 
        
    }
    catch (ExceptionDetails ex){
        debug("Exception: " + ex.message);
    }
}]]></string>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Source code active" value="true"/>
                  <string name="Source code extref key" null="true"/>
                  <enum name="Source code fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Source code mod" value="false"/>
                  <boolean name="Source code pres" value="true"/>
                  <object name="UDR types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="Object Internal" size="1">
                              <storable name="0" storable-id="dr.DRTypeInfo" ver="1.0">
                                 <string name="TypeName"><![CDATA[ws.IMB.PRF_WS_IMBLoanService.cycles.AbstractIMBLoanServicePortTypeWSCycle]]></string>
                              </storable>
                           </array>
                        </object>
                     </storable>
                  </object>
                  <boolean name="UDR types active" value="true"/>
                  <string name="UDR types extref key" null="true"/>
                  <enum name="UDR types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="UDR types mod" value="false"/>
                  <boolean name="UDR types pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="createRequest"/>
      </storable>
      <storable name="1" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.ws.WSCollInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.ws.WSCollInsp"/>
               <storable name="Data" storable-id="dr.WSCollData" ver="7.0">
                  <object name="enableBasicAuthentication">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <boolean name="Object Internal" value="false"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="enableBasicAuthentication active" value="true"/>
                  <string name="enableBasicAuthentication extref key" null="true"/>
                  <enum name="enableBasicAuthentication fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="enableBasicAuthentication mod" value="false"/>
                  <boolean name="enableBasicAuthentication pres" value="true"/>
                  <object name="httpPassword">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <password name="Object Internal" value="DR_DEFAULT_KEY-017BB0B8FB061C1876D43DD75468AA40"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="httpPassword active" value="false"/>
                  <string name="httpPassword extref key" null="true"/>
                  <enum name="httpPassword fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="httpPassword mod" value="false"/>
                  <boolean name="httpPassword pres" value="true"/>
                  <object name="httpUsername">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value=""/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="httpUsername active" value="false"/>
                  <string name="httpUsername extref key" null="true"/>
                  <enum name="httpUsername fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="httpUsername mod" value="false"/>
                  <boolean name="httpUsername pres" value="true"/>
                  <object name="http_address">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value="https://0.0.0.0:8087/ws/IMBLoanService"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="http_address active" value="true"/>
                  <string name="http_address extref key" null="true"/>
                  <enum name="http_address fit" storable-id="dr.DRFieldInstanceType" value="DEFAULT"/>
                  <boolean name="http_address mod" value="false"/>
                  <boolean name="http_address pres" value="true"/>
                  <object name="idleTimeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="0"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="idleTimeout active" value="true"/>
                  <string name="idleTimeout extref key" null="true"/>
                  <enum name="idleTimeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="idleTimeout mod" value="false"/>
                  <boolean name="idleTimeout pres" value="true"/>
                  <object name="profile">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <storable name="Object Internal" storable-id="dr.DRConfiguration" ver="1.0">
                              <string name="Folder" value="IMB"/>
                              <string name="Key" value="MZ1521798415467"/>
                              <string name="Name" value="PRF_WS_IMBLoanService"/>
                              <string name="Type" value="WS Profile"/>
                           </storable>
                        </object>
                     </storable>
                  </object>
                  <boolean name="profile active" value="true"/>
                  <string name="profile extref key" null="true"/>
                  <enum name="profile fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="profile mod" value="false"/>
                  <boolean name="profile pres" value="true"/>
                  <object name="transport">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value=""/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="transport active" value="false"/>
                  <string name="transport extref key" null="true"/>
                  <enum name="transport fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="transport mod" value="false"/>
                  <boolean name="transport pres" value="true"/>
                  <object name="workflowResponseTimeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="32000"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="workflowResponseTimeout active" value="true"/>
                  <string name="workflowResponseTimeout extref key" null="true"/>
                  <enum name="workflowResponseTimeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="workflowResponseTimeout mod" value="false"/>
                  <boolean name="workflowResponseTimeout pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="IMBLoanService_WSDL"/>
      </storable>
      <storable name="2" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.mz.rest.agent.RESTAgentInspRT"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.mz.rest.agent.RESTAgentInspRT"/>
               <storable name="Data" storable-id="dr.RestData" ver="8.04">
                  <object name="accessTokenURI">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value=""/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="accessTokenURI active" value="true"/>
                  <string name="accessTokenURI extref key" null="true"/>
                  <enum name="accessTokenURI fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="accessTokenURI mod" value="false"/>
                  <boolean name="accessTokenURI pres" value="true"/>
                  <object name="authenticationType">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <enum name="Object Internal" storable-id="dr.RESTAgentAuthenticationTypes" value="None"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="authenticationType active" value="true"/>
                  <string name="authenticationType extref key" null="true"/>
                  <enum name="authenticationType fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="authenticationType mod" value="false"/>
                  <boolean name="authenticationType pres" value="true"/>
                  <object name="baseURL">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value="https://cbslos.ghb.co.th"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="baseURL active" value="true"/>
                  <string name="baseURL extref key" null="true"/>
                  <enum name="baseURL fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="baseURL mod" value="false"/>
                  <boolean name="baseURL pres" value="true"/>
                  <object name="clientID">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value=""/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="clientID active" value="true"/>
                  <string name="clientID extref key" null="true"/>
                  <enum name="clientID fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="clientID mod" value="false"/>
                  <boolean name="clientID pres" value="true"/>
                  <object name="clientSecret">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <password name="Object Internal" value="DR_DEFAULT_KEY-017BB0B8FB061C1876D43DD75468AA40"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="clientSecret active" value="true"/>
                  <string name="clientSecret extref key" null="true"/>
                  <enum name="clientSecret fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="clientSecret mod" value="false"/>
                  <boolean name="clientSecret pres" value="true"/>
                  <object name="grantType">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <enum name="Object Internal" storable-id="dr.RESTAgentGrantType" value="ClientCredentials"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="grantType active" value="true"/>
                  <string name="grantType extref key" null="true"/>
                  <enum name="grantType fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="grantType mod" value="false"/>
                  <boolean name="grantType pres" value="true"/>
                  <object name="keystorePassword">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <password name="Object Internal" value="DR_DEFAULT_KEY-25FB75239B53E487605912194E971790"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="keystorePassword active" value="true"/>
                  <string name="keystorePassword extref key" null="true"/>
                  <enum name="keystorePassword fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="keystorePassword mod" value="false"/>
                  <boolean name="keystorePassword pres" value="true"/>
                  <object name="keystorePath">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value="/opt/jdk/jdk1.8.0_161/jre/lib/security/cacerts"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="keystorePath active" value="true"/>
                  <string name="keystorePath extref key" null="true"/>
                  <enum name="keystorePath fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="keystorePath mod" value="false"/>
                  <boolean name="keystorePath pres" value="true"/>
                  <object name="maxOutStandingRequests">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="100"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="maxOutStandingRequests active" value="true"/>
                  <string name="maxOutStandingRequests extref key" null="true"/>
                  <enum name="maxOutStandingRequests fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="maxOutStandingRequests mod" value="false"/>
                  <boolean name="maxOutStandingRequests pres" value="true"/>
                  <object name="oauthParameters">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <list classname="java.util.ArrayList" name="Object Internal"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="oauthParameters active" value="true"/>
                  <string name="oauthParameters extref key" null="true"/>
                  <enum name="oauthParameters fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="oauthParameters mod" value="false"/>
                  <boolean name="oauthParameters pres" value="true"/>
                  <object name="oauthPassword">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <password name="Object Internal" value="DR_DEFAULT_KEY-017BB0B8FB061C1876D43DD75468AA40"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="oauthPassword active" value="true"/>
                  <string name="oauthPassword extref key" null="true"/>
                  <enum name="oauthPassword fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="oauthPassword mod" value="false"/>
                  <boolean name="oauthPassword pres" value="true"/>
                  <object name="oauthUsername">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value=""/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="oauthUsername active" value="true"/>
                  <string name="oauthUsername extref key" null="true"/>
                  <enum name="oauthUsername fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="oauthUsername mod" value="false"/>
                  <boolean name="oauthUsername pres" value="true"/>
                  <object name="overrideBaseURL">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value=""/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="overrideBaseURL active" value="true"/>
                  <string name="overrideBaseURL extref key" null="true"/>
                  <enum name="overrideBaseURL fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="overrideBaseURL mod" value="false"/>
                  <boolean name="overrideBaseURL pres" value="true"/>
                  <object name="password">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <password name="Object Internal" value="DR_DEFAULT_KEY-017BB0B8FB061C1876D43DD75468AA40"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="password active" value="true"/>
                  <string name="password extref key" null="true"/>
                  <enum name="password fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="password mod" value="false"/>
                  <boolean name="password pres" value="true"/>
                  <object name="timeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="32000"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="timeout active" value="true"/>
                  <string name="timeout extref key" null="true"/>
                  <enum name="timeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="timeout mod" value="false"/>
                  <boolean name="timeout pres" value="true"/>
                  <object name="username">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value=""/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="username active" value="true"/>
                  <string name="username extref key" null="true"/>
                  <enum name="username fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="username mod" value="false"/>
                  <boolean name="username pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="REST_LoanApplication"/>
      </storable>
      <storable name="3" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname"><![CDATA[com.digitalroute.wfc.aggregation.AggregationRealtimeInsp]]></string>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname"><![CDATA[com.digitalroute.wfc.aggregation.AggregationRealtimeInsp]]></string>
               <storable name="Data" storable-id="dr.AggregationConfig" ver="10.6">
                  <object name="Commit Count">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="1000"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Commit Count active" value="true"/>
                  <string name="Commit Count extref key" null="true"/>
                  <enum name="Commit Count fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Commit Count mod" value="false"/>
                  <boolean name="Commit Count pres" value="true"/>
                  <object name="Commit Timeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="60"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Commit Timeout active" value="true"/>
                  <string name="Commit Timeout extref key" null="true"/>
                  <enum name="Commit Timeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Commit Timeout mod" value="false"/>
                  <boolean name="Commit Timeout pres" value="true"/>
                  <object name="Default Timeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="60"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Default Timeout active" value="true"/>
                  <string name="Default Timeout extref key" null="true"/>
                  <enum name="Default Timeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Default Timeout mod" value="false"/>
                  <boolean name="Default Timeout pres" value="true"/>
                  <object name="Defragmentation">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <enum name="Object Internal" storable-id="dr.DefragType" value="NONE"/>
                        </object>
                     </storable>
                  </object>
                  <object name="Defragmentation After Each Batch Time Limit">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="5"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Defragmentation After Each Batch Time Limit active" value="false"/>
                  <string name="Defragmentation After Each Batch Time Limit extref key" null="true"/>
                  <enum name="Defragmentation After Each Batch Time Limit fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Defragmentation After Each Batch Time Limit mod" value="false"/>
                  <boolean name="Defragmentation After Each Batch Time Limit pres" value="true"/>
                  <object name="Defragmentation After Number of Batches">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="1"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Defragmentation After Number of Batches active" value="false"/>
                  <string name="Defragmentation After Number of Batches extref key" null="true"/>
                  <enum name="Defragmentation After Number of Batches fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Defragmentation After Number of Batches mod" value="false"/>
                  <boolean name="Defragmentation After Number of Batches pres" value="true"/>
                  <object name="Defragmentation File Age Limit">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="5"/>
                        </object>
                     </storable>
                  </object>
                  <object name="Defragmentation File Age Limit Time Unit">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value="MINUTES"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Defragmentation File Age Limit Time Unit active" value="false"/>
                  <string name="Defragmentation File Age Limit Time Unit extref key" null="true"/>
                  <enum name="Defragmentation File Age Limit Time Unit fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Defragmentation File Age Limit Time Unit mod" value="false"/>
                  <boolean name="Defragmentation File Age Limit Time Unit pres" value="true"/>
                  <boolean name="Defragmentation File Age Limit active" value="false"/>
                  <string name="Defragmentation File Age Limit extref key" null="true"/>
                  <enum name="Defragmentation File Age Limit fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Defragmentation File Age Limit mod" value="false"/>
                  <boolean name="Defragmentation File Age Limit pres" value="true"/>
                  <boolean name="Defragmentation active" value="false"/>
                  <string name="Defragmentation extref key" null="true"/>
                  <enum name="Defragmentation fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Defragmentation mod" value="false"/>
                  <boolean name="Defragmentation pres" value="true"/>
                  <object name="Disable Timeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <boolean name="Object Internal" value="false"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Disable Timeout active" value="true"/>
                  <string name="Disable Timeout extref key" null="true"/>
                  <enum name="Disable Timeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Disable Timeout mod" value="false"/>
                  <boolean name="Disable Timeout pres" value="true"/>
                  <object name="Interval Timeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="60"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Interval Timeout active" value="true"/>
                  <string name="Interval Timeout extref key" null="true"/>
                  <enum name="Interval Timeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Interval Timeout mod" value="false"/>
                  <boolean name="Interval Timeout pres" value="true"/>
                  <object name="Main script">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal"><![CDATA[sessionInit {
    session.match = udrCreate(Matcher);    
}

consume {
    debug(input.uuid);
    if (input.soapRequest!=null) {
        debug("Soap Request");
        session.match.soapRequest = input.soapRequest;
        session.match.requestMillisec = input.requestMillisec;
    }
    
    if (input.restResponse!=null) {
        debug("REST Response");
        debug(input.restResponse);
        session.match.restResponse = input.restResponse;
        session.match.uuid = input.uuid;
    }
    
    if (session.match.soapRequest!=null && session.match.restResponse!=null) {
        debug("Matched");
        udrRoute(session.match);
        sessionRemove(session);
    } else {
        debug("Unmatched");
    }
}

timeout {
    debug("Session is timeout. Removing session");
    sessionRemove(session);
}]]></string>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Main script active" value="true"/>
                  <string name="Main script extref key" null="true"/>
                  <enum name="Main script fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Main script mod" value="false"/>
                  <boolean name="Main script pres" value="true"/>
                  <object name="No Match">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="0"/>
                        </object>
                     </storable>
                  </object>
                  <object name="No Match Router">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal" value="Response"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="No Match Router active" value="true"/>
                  <string name="No Match Router extref key" null="true"/>
                  <enum name="No Match Router fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="No Match Router mod" value="false"/>
                  <boolean name="No Match Router pres" value="true"/>
                  <boolean name="No Match active" value="true"/>
                  <string name="No Match extref key" null="true"/>
                  <enum name="No Match fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="No Match mod" value="false"/>
                  <boolean name="No Match pres" value="true"/>
                  <object name="No Storage Behaviour">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="0"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="No Storage Behaviour active" value="true"/>
                  <string name="No Storage Behaviour extref key" null="true"/>
                  <enum name="No Storage Behaviour fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="No Storage Behaviour mod" value="false"/>
                  <boolean name="No Storage Behaviour pres" value="true"/>
                  <object name="No Storage Router">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <null name="Object Internal"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="No Storage Router active" value="true"/>
                  <string name="No Storage Router extref key" null="true"/>
                  <enum name="No Storage Router fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="No Storage Router mod" value="false"/>
                  <boolean name="No Storage Router pres" value="true"/>
                  <object name="Null Timeout">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <int name="Object Internal" value="2"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Null Timeout active" value="true"/>
                  <string name="Null Timeout extref key" null="true"/>
                  <enum name="Null Timeout fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Null Timeout mod" value="false"/>
                  <boolean name="Null Timeout pres" value="true"/>
                  <object name="Profile Key">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <storable name="Object Internal" storable-id="dr.DRConfiguration" ver="1.0">
                              <string name="Folder" value="IMB"/>
                              <string name="Key" value="MZ1527846392727"/>
                              <string name="Name" value="PRF_Aggregation_IMBLoanService"/>
                              <string name="Type" value="Aggregation Profile"/>
                           </storable>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Profile Key active" value="true"/>
                  <string name="Profile Key extref key" null="true"/>
                  <enum name="Profile Key fit" storable-id="dr.DRFieldInstanceType" value="DEFAULT"/>
                  <boolean name="Profile Key mod" value="false"/>
                  <boolean name="Profile Key pres" value="true"/>
                  <object name="Read Only">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <boolean name="Object Internal" value="false"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Read Only active" value="true"/>
                  <string name="Read Only extref key" null="true"/>
                  <enum name="Read Only fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Read Only mod" value="false"/>
                  <boolean name="Read Only pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="matchRESTReqtoRES"/>
      </storable>
      <storable name="4" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
               <storable name="Data" storable-id="dr.StuffyMapperData" ver="1.0">
                  <object name="Source code">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal"><![CDATA[import ultra.RESTClient;
import ultra.CBS.UFL_Aggregation;

consume {
    if(instanceOf(input, RESTCycleUDR)){
        debug(input);        
        RESTCycleUDR resp = (RESTCycleUDR) input;
        
        Matcher match = udrCreate(Matcher);
        match.uuid = (string) resp.Context;
        match.restResponse = resp.Response;
        udrRoute(match);  
    } else {
        debug(input);
    }
}]]></string>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Source code active" value="true"/>
                  <string name="Source code extref key" null="true"/>
                  <enum name="Source code fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Source code mod" value="false"/>
                  <boolean name="Source code pres" value="true"/>
                  <object name="UDR types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="Object Internal" size="1">
                              <storable name="0" storable-id="dr.DRTypeInfo" ver="1.0">
                                 <string name="TypeName" value="RESTClient.RESTCycleUDR"/>
                              </storable>
                           </array>
                        </object>
                     </storable>
                  </object>
                  <boolean name="UDR types active" value="true"/>
                  <string name="UDR types extref key" null="true"/>
                  <enum name="UDR types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="UDR types mod" value="false"/>
                  <boolean name="UDR types pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="packetRESTWait"/>
      </storable>
      <storable name="5" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
               <storable name="Data" storable-id="dr.StuffyMapperData" ver="1.0">
                  <object name="Source code">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal"><![CDATA[//ultra
import ultra.ws.IMB.PRF_WS_IMBLoanService.cycles;
import ultra.CBS.UFL_Aggregation;
import ultra.Ultra.UFL_Rest;

consume {
    try{
        debug(input);
        //debug("Response Message:" + baToStr(input.tcpResponse.data, "IBM-Thai"));
        //debug(baToStr(input.tcpResponse, "IBM-Thai"));
        if(instanceOf(input.soapRequest,WSCycle_getLoanApplicationStatus)){
            //udrRoute(input.restResponse.Body,"JSONMapping");
            RestLOS_RQ LOS = udrCreate(RestLOS_RQ);
            LOS.restBody = input.restResponse.Body;
            //debug(LOS.restBody);
            //debug(baToStr(LOS.restBody, "IBM-Thai"));
            LOS.soapRequest = input.soapRequest;
            LOS.requestMillisec = input.requestMillisec;
            LOS.uuid = input.uuid;
            udrRoute(LOS,"JSONMapping");
        }
    }
    catch(ExceptionDetails ex){
        debug("Exception: " + ex.message);
    }  
}]]></string>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Source code active" value="true"/>
                  <string name="Source code extref key" null="true"/>
                  <enum name="Source code fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Source code mod" value="false"/>
                  <boolean name="Source code pres" value="true"/>
                  <object name="UDR types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="Object Internal" size="1">
                              <storable name="0" storable-id="dr.UltraClientInfo" ver="1.0">
                                 <string name="FormatName" value="CBS.UFL_Aggregation"/>
                                 <string name="TypeName" value="CBS.UFL_Aggregation.Matcher"/>
                              </storable>
                           </array>
                        </object>
                     </storable>
                  </object>
                  <boolean name="UDR types active" value="true"/>
                  <string name="UDR types extref key" null="true"/>
                  <enum name="UDR types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="UDR types mod" value="false"/>
                  <boolean name="UDR types pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="responseRESTMapping"/>
      </storable>
      <storable name="6" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname"><![CDATA[com.digitalroute.pythonagents.agent.PythonRealtimeProcessingAgentInsp]]></string>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname"><![CDATA[com.digitalroute.pythonagents.agent.PythonRealtimeProcessingAgentInsp]]></string>
               <storable name="Data" storable-id="dr.PythonAgentData" ver="8.1">
                  <object name="Input Types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="Object Internal" size="1">
                              <storable name="0" storable-id="dr.UltraClientInfo" ver="1.0">
                                 <string name="FormatName" value="Ultra.UFL_Rest"/>
                                 <string name="TypeName" value="Ultra.UFL_Rest.RestLOS_RQ"/>
                              </storable>
                           </array>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Input Types active" value="true"/>
                  <string name="Input Types extref key" null="true"/>
                  <enum name="Input Types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Input Types mod" value="false"/>
                  <boolean name="Input Types pres" value="true"/>
                  <object name="Interpreter">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <storable name="Object Internal" storable-id="dr.DRConfiguration" ver="1.0">
                              <string name="Folder" value="CM"/>
                              <string name="Key" value="MZ1523333536387"/>
                              <string name="Name" value="PRF_Python"/>
                              <string name="Type" value="Python Interpreter Profile"/>
                           </storable>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Interpreter active" value="true"/>
                  <string name="Interpreter extref key" null="true"/>
                  <enum name="Interpreter fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Interpreter mod" value="false"/>
                  <boolean name="Interpreter pres" value="true"/>
                  <object name="MIMs">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.wf.DRMIMEntry" name="Object Internal" size="0"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="MIMs active" value="true"/>
                  <string name="MIMs extref key" null="true"/>
                  <enum name="MIMs fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="MIMs mod" value="false"/>
                  <boolean name="MIMs pres" value="true"/>
                  <object name="Output Types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.pythonagents.OutputTypeInfo" name="Object Internal" size="1">
                              <storable name="0" storable-id="dr.PythonOutputTypeInfo" ver="1.0">
                                 <string name="route" null="true"/>
                                 <storable name="udrTypeInfo" storable-id="dr.UltraClientInfo" ver="1.0">
                                    <string name="FormatName" value="Ultra.UFL_Rest"/>
                                    <string name="TypeName" value="Ultra.UFL_Rest.RestLOS_RS"/>
                                 </storable>
                              </storable>
                           </array>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Output Types active" value="true"/>
                  <string name="Output Types extref key" null="true"/>
                  <enum name="Output Types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Output Types mod" value="false"/>
                  <boolean name="Output Types pres" value="true"/>
                  <object name="Source Code">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal"><![CDATA[#from ultra.Ultra.UFL_GetLocalAddressLabel import LOCALADDR_LABEL_RS_TI
#import lib
import json
from python.IMB.PYM_IMBService import *

#import ultra
from ultra.Ultra.UFL_Rest import RestLOS_RS

def consume(input):
    mapping = RestLOS_RS()
    
    try:
        if isinstance(input, RestLOS_RQ):
            jsonString = str(input.restBody)
            print jsonString
            jsonDecode = json.loads(jsonString)

            mapping.Status = jsonDecode[0].get('Status')
            mapping.ApplicationNumber = jsonDecode[0].get('ApplicationNumber')
            mapping.ApplicationStatus = jsonDecode[0].get('ApplicationStatus')
            mapping.ApprovedLimit = jsonDecode[0].get('ApprovedLimit')
            mapping.BranchCode = jsonDecode[0].get('BranchCode')
            mapping.BranchName = jsonDecode[0].get('BranchName')
            mapping.BranchNameEN = jsonDecode[0].get('BranchNameEN')
            mapping.Objective = jsonDecode[0].get('Objective')
            mapping.ObjectiveEN = jsonDecode[0].get('ObjectiveEN')
            mapping.OfficerName = jsonDecode[0].get('OfficerName')
            mapping.ErrCode = jsonDecode[0].get('ErrCode')
            mapping.ErrMessage = jsonDecode[0].get('ErrMessage')
            #additional value los mapping status
            if jsonDecode[0].get('Status') == "Succ":
                losMapping = LOSMappingDesc(jsonDecode[0].get('ApplicationStatus')).split('|')
                #print losMapping
                mapping.GHBApplicationStatus = losMapping[3]
                mapping.GHBApplicationStatusDesc = losMapping[1]
                mapping.GHBApplicationStatusDescEN = losMapping[2]
            mapping.soapRequest = input.soapRequest
            mapping.requestMillisec = input.requestMillisec
            mapping.restResponse = jsonString
            mapping.uuid = input.uuid

            print mapping
            udrRoute(mapping,'UDRMapping')
    except Exception as e:
            mapping.Status = 'Err'
            mapping.ErrCode = ''
            mapping.ErrMessage = 'The operation has timed out.'
            print mapping
            print e
            udrRoute(mapping,'UDRMapping')
]]></string>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Source Code active" value="true"/>
                  <string name="Source Code extref key" null="true"/>
                  <enum name="Source Code fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Source Code mod" value="false"/>
                  <boolean name="Source Code pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="MapingJSON"/>
      </storable>
      <storable name="7" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
               <storable name="Data" storable-id="dr.StuffyMapperData" ver="1.0">
                  <object name="Source code">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal"><![CDATA[//ultra
import ultra.ws.IMB.PRF_WS_IMBLoanService.cycles;
import ultra.Ultra.UFL_SYSLOG;
//apl
import apl.IMB.APL_IMBLoanService;

consume {
    try{
        //debug(input);
        if(instanceOf(input,RestLOS_RS)){
            RestLOS_RS res = (RestLOS_RS) input;
            WSCycle_getLoanApplicationStatus soapResponse = responseMessage_GetLoanApplicationStatus(res);
            udrRoute(soapResponse, "toResponseIMBLoanService");   
            
            //save log
            Logger log = udrCreate(Logger);
            log.uuid = res.uuid;
            log.channelName = "IMB";
            log.serviceName = "getLoanApplicationStatus";
            log.xmlString = (string) soapResponse;
            log.restString = res.restResponse;
            log.logType = "response";
            //get execution context
            log.exContext = (string) mimGet("Workflow", "Execution Context");
            if (res.Status == "Succ"){
                log.responseStatus = "AA";
            }else{
                log.responseStatus = "AB";
            }
            udrRoute(log,"saveResLogREST");
        }
    }
    catch(ExceptionDetails ex){
        debug("Exception: " + ex.message);
    }  
}]]></string>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Source code active" value="true"/>
                  <string name="Source code extref key" null="true"/>
                  <enum name="Source code fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Source code mod" value="false"/>
                  <boolean name="Source code pres" value="true"/>
                  <object name="UDR types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="Object Internal" size="1">
                              <storable name="0" storable-id="dr.UltraClientInfo" ver="1.0">
                                 <string name="FormatName" value="Ultra.UFL_Rest"/>
                                 <string name="TypeName" value="Ultra.UFL_Rest.RestLOS_RS"/>
                              </storable>
                           </array>
                        </object>
                     </storable>
                  </object>
                  <boolean name="UDR types active" value="true"/>
                  <string name="UDR types extref key" null="true"/>
                  <enum name="UDR types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="UDR types mod" value="false"/>
                  <boolean name="UDR types pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="responseSOAP"/>
      </storable>
      <storable name="8" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname"><![CDATA[com.digitalroute.pythonagents.agent.PythonRealtimeProcessingAgentInsp]]></string>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname"><![CDATA[com.digitalroute.pythonagents.agent.PythonRealtimeProcessingAgentInsp]]></string>
               <storable name="Data" storable-id="dr.PythonAgentData" ver="8.1">
                  <object name="Input Types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="Object Internal" size="1">
                              <storable name="0" storable-id="dr.UltraClientInfo" ver="1.0">
                                 <string name="FormatName" value="Ultra.UFL_SYSLOG"/>
                                 <string name="TypeName" value="Ultra.UFL_SYSLOG.Logger"/>
                              </storable>
                           </array>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Input Types active" value="true"/>
                  <string name="Input Types extref key" null="true"/>
                  <enum name="Input Types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Input Types mod" value="false"/>
                  <boolean name="Input Types pres" value="true"/>
                  <object name="Interpreter">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <storable name="Object Internal" storable-id="dr.DRConfiguration" ver="1.0">
                              <string name="Folder" value="CM"/>
                              <string name="Key" value="MZ1523333536387"/>
                              <string name="Name" value="PRF_Python"/>
                              <string name="Type" value="Python Interpreter Profile"/>
                           </storable>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Interpreter active" value="true"/>
                  <string name="Interpreter extref key" null="true"/>
                  <enum name="Interpreter fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Interpreter mod" value="false"/>
                  <boolean name="Interpreter pres" value="true"/>
                  <object name="MIMs">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.devkit.wf.DRMIMEntry" name="Object Internal" size="0"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="MIMs active" value="true"/>
                  <string name="MIMs extref key" null="true"/>
                  <enum name="MIMs fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="MIMs mod" value="false"/>
                  <boolean name="MIMs pres" value="true"/>
                  <object name="Output Types">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <array classname="com.digitalroute.pythonagents.OutputTypeInfo" name="Object Internal" size="0"/>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Output Types active" value="true"/>
                  <string name="Output Types extref key" null="true"/>
                  <enum name="Output Types fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Output Types mod" value="false"/>
                  <boolean name="Output Types pres" value="true"/>
                  <object name="Source Code">
                     <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
                        <object name="Value">
                           <string name="Object Internal"><![CDATA[from python.Common.PYM_SYS_Logger import *

def consume(input):
    log = input
    reqID = str(log.uuid)
    logType = str(log.logType)
    xmlString = str(log.xmlString)
    socketString = str(log.socketString)
    serviceName = str(log.serviceName)
    responseStatus = str(log.responseStatus)
    channelName = str(log.channelName)
    restString = str(log.restString)
    exContext = str(log.exContext)
    
    writeLogger('Inbound', reqID, logType, xmlString, socketString, serviceName, responseStatus, channelName, restString,exContext)
    #pass
]]></string>
                        </object>
                     </storable>
                  </object>
                  <boolean name="Source Code active" value="true"/>
                  <string name="Source Code extref key" null="true"/>
                  <enum name="Source Code fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
                  <boolean name="Source Code mod" value="false"/>
                  <boolean name="Source Code pres" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="SaveLogREST"/>
      </storable>
   </list>
   <storable name="Persistent" storable-id="dr.WorkflowPersistentConfig" ver="6.0">
      <object name="Persistent Inspector">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <null name="Object Internal"/>
            </object>
         </storable>
      </object>
      <boolean name="Persistent Inspector active" value="true"/>
      <string name="Persistent Inspector extref key" null="true"/>
      <enum name="Persistent Inspector fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Persistent Inspector mod" value="false"/>
      <boolean name="Persistent Inspector pres" value="true"/>
      <object name="Persistent Storage Config">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <null name="Object Internal"/>
            </object>
         </storable>
      </object>
      <boolean name="Persistent Storage Config active" value="true"/>
      <string name="Persistent Storage Config extref key" null="true"/>
      <enum name="Persistent Storage Config fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Persistent Storage Config mod" value="false"/>
      <boolean name="Persistent Storage Config pres" value="true"/>
      <object name="Persistent Timeout Handler">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <null name="Object Internal"/>
            </object>
         </storable>
      </object>
      <boolean name="Persistent Timeout Handler active" value="true"/>
      <string name="Persistent Timeout Handler extref key" null="true"/>
      <enum name="Persistent Timeout Handler fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Persistent Timeout Handler mod" value="false"/>
      <boolean name="Persistent Timeout Handler pres" value="true"/>
   </storable>
   <list classname="java.util.ArrayList" name="Routes">
      <storable name="0" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="toCreateRequest"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="1" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="RESTRequest"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="10" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="saveResLogREST"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="2" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="RESTResponse"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="3" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="fullRESTResponse"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="4" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="toRESTAggregation"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="5" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="Response"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="6" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="JSONMapping"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="7" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="UDRMapping"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="8" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="toResponseIMBLoanService"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="9" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="saveReqLogREST"/>
         <int name="Realtime mode" value="0"/>
      </storable>
   </list>
   <list classname="java.util.ArrayList" name="Service"/>
   <boolean name="Template Valid" value="true"/>
   <storable name="Thread data" storable-id="dr.WorkflowExecutionRealtimeConfig" ver="8.0">
      <object name="Processed UDRs count interval">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <int name="Object Internal" value="1"/>
            </object>
         </storable>
      </object>
      <boolean name="Processed UDRs count interval active" value="true"/>
      <string name="Processed UDRs count interval extref key" null="true"/>
      <enum name="Processed UDRs count interval fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Processed UDRs count interval mod" value="false"/>
      <boolean name="Processed UDRs count interval pres" value="true"/>
      <object name="Queue Size">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <int name="Object Internal" value="1000"/>
            </object>
         </storable>
      </object>
      <boolean name="Queue Size active" value="true"/>
      <string name="Queue Size extref key" null="true"/>
      <enum name="Queue Size fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Queue Size mod" value="false"/>
      <boolean name="Queue Size pres" value="true"/>
      <object name="Queue strategies">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <string name="Object Internal" value="Blocking queue"/>
            </object>
         </storable>
      </object>
      <boolean name="Queue strategies active" value="true"/>
      <string name="Queue strategies extref key" null="true"/>
      <enum name="Queue strategies fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Queue strategies mod" value="false"/>
      <boolean name="Queue strategies pres" value="true"/>
      <object name="Queue worker strategies">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <string name="Object Internal" value="RoundRobin"/>
            </object>
         </storable>
      </object>
      <boolean name="Queue worker strategies active" value="true"/>
      <string name="Queue worker strategies extref key" null="true"/>
      <enum name="Queue worker strategies fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Queue worker strategies mod" value="false"/>
      <boolean name="Queue worker strategies pres" value="true"/>
      <object name="Stand-alone">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <boolean name="Object Internal" value="true"/>
            </object>
         </storable>
      </object>
      <boolean name="Stand-alone active" value="true"/>
      <string name="Stand-alone extref key" null="true"/>
      <enum name="Stand-alone fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Stand-alone mod" value="false"/>
      <boolean name="Stand-alone pres" value="true"/>
      <object name="Threads">
         <storable name="Object Internal" storable-id="dr.DRGeneratedFromContract$Field$FieldWrapper" ver="1.0">
            <object name="Value">
               <int name="Object Internal" value="8"/>
            </object>
         </storable>
      </object>
      <boolean name="Threads active" value="true"/>
      <string name="Threads extref key" null="true"/>
      <enum name="Threads fit" storable-id="dr.DRFieldInstanceType" value="FINAL"/>
      <boolean name="Threads mod" value="false"/>
      <boolean name="Threads pres" value="true"/>
   </storable>
   <storable name="Timer Trigger" null="true"/>
</exportmultiplex>
